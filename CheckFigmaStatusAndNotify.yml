main:
    steps:
    - variable_declarations:
        assign:
        - chat_url: https://chat.googleapis.com/v1/spaces/AAAAn4yZytI/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=Nf3NbLBr8Nd8YAup4dzyBGE8nqpzn5Szvk4K18cTRy8%3D
    - getTheCurrentFigmaStatusReport:
        call: http.get
        args:
            url: https://status.figma.com/history.json
        result: figStatus
    - checkFigStatus:
        switch:
         - condition: ${figStatus.body.components[0].status != "operational"}
           next: figDown
         - condition: ${figStatus.body.components[1].status != "operational"}
           next: figDown
         - condition: ${figStatus.body.components[2].status != "operational"}
           next: figDown
        next: figUp
    - figUp:
       return: ${"Figma IS NOT reporting any outages"}
    - figDown:
        call: http.post
        args:
          url: ${chat_url}
          body:
            text: "UH OH.... Figma is currently reporting an outage. More details available here https://status.figma.com/#"